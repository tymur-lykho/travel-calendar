{"version":3,"file":"index.js","sources":["../src/js/config.js","../src/js/maps_init.js","../src/js/refs.js","../src/js/utils.js","../src/js/localStorage.js","../src/js/globals.js","../src/js/marker.js","../src/js/routes.js","../src/img/random-marker.svg","../src/js/render.js","../src/js/handlers.js","../src/js/maps.js","../src/js/resizer.js","../src/img/emoji-people.svg","../src/js/infoWindow.js","../src/main.js"],"sourcesContent":["export const config = {\n  GM_API_KEY: import.meta.env.VITE_GOOGLE_MAP_API_KEY,\n};\n","import { config } from './config';\n\n(g => {\n  var h,\n    a,\n    k,\n    p = 'The Google Maps JavaScript API',\n    c = 'google',\n    l = 'importLibrary',\n    q = '__ib__',\n    m = document,\n    b = window;\n  b = b[c] || (b[c] = {});\n  var d = b.maps || (b.maps = {}),\n    r = new Set(),\n    e = new URLSearchParams(),\n    u = () =>\n      h ||\n      (h = new Promise(async (f, n) => {\n        await (a = m.createElement('script'));\n        e.set('libraries', [...r] + '');\n        for (k in g)\n          e.set(\n            k.replace(/[A-Z]/g, t => '_' + t[0].toLowerCase()),\n            g[k]\n          );\n        e.set('callback', c + '.maps.' + q);\n        a.src = `https://maps.${c}apis.com/maps/api/js?` + e;\n        d[q] = f;\n        a.onerror = () => (h = n(Error(p + ' could not load.')));\n        a.nonce = m.querySelector('script[nonce]')?.nonce || '';\n        m.head.append(a);\n      }));\n  d[l]\n    ? console.warn(p + ' only loads once. Ignoring:', g)\n    : (d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)));\n})({\n  key: config.GM_API_KEY,\n  v: 'weekly',\n});\n","export const refs = {\n  mapArea: document.getElementById('map'),\n  resizer: document.querySelector('.resizer'),\n  randomBtn: document.getElementById('btn-random-place'),\n  findMeBtn: document.getElementById('btn-my-coordinate'),\n  addMarkerBtn: document.getElementById('btn-add-marker'),\n  addLocationbtn: document.getElementById('btn-add-location'),\n  addLocationForm: document.getElementById('add-location-form'),\n  locationList: document.getElementById('location-list'),\n};\n","export function convertS(s) {\n  const minute = 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(s / day);\n  const hours = Math.floor((s % day) / hour);\n  const minutes = Math.floor((s % hour) / minute);\n  const seconds = s % minute;\n\n  return { days, hours, minutes, seconds };\n}\n\nexport function convertMetersToKmeters(m) {\n  const km = 1000;\n  const kkm = 1000000;\n\n  const kkms = Math.floor(m / kkm);\n  const kms = Math.floor((m % kkm) / km);\n  const meters = m % km;\n\n  return { kkms, kms, meters };\n}\n\nexport function getRandomArbitrary(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\nexport function dataToJSON(data) {\n  return JSON.stringify(data);\n}\n\nexport function jsonToData(jsonData) {\n  try {\n    return JSON.parse(jsonData);\n  } catch (error) {\n    console.log('Parse error :', error);\n  }\n}\n","import { jsonToData, dataToJSON } from './utils';\n\nexport function saveToLS(key, data) {\n  localStorage.setItem(key, dataToJSON(data));\n}\n\nexport function removeFromLS(key) {\n  localStorage.removeItem(key);\n}\n\nexport function getDataFromLS(key) {\n  return jsonToData(localStorage.getItem(key));\n}\n","export const globals = {\n  map: null,\n  marker: null,\n  infoWindow: null,\n};\n","import { globals } from './globals';\nimport { handleMarkerDragend } from './handlers';\nimport { getDataFromLS } from './localStorage';\n\nexport let userMarkers = [];\n\nexport async function initMarker(\n  position,\n  draggable,\n  title,\n  markerImage = undefined,\n  defaultMarker = true\n) {\n  const { AdvancedMarkerElement, PinElement } = await google.maps.importLibrary(\n    'marker'\n  );\n\n  let glyphSvgPinElement;\n  if (markerImage) {\n    const glyphImg = document.createElement('img');\n    glyphImg.src = markerImage;\n\n    glyphSvgPinElement = new PinElement({\n      glyph: glyphImg,\n    });\n  }\n\n  const marker = new AdvancedMarkerElement({\n    map: globals.map,\n    position: position,\n    gmpDraggable: draggable,\n    gmpClickable: true,\n    content: glyphSvgPinElement?.element,\n    title,\n  });\n\n  marker.addListener('dragstart', () => {\n    globals.infoWindow.close();\n  });\n\n  if (!!defaultMarker) {\n    marker.addListener('dragend', () => handleMarkerDragend(marker));\n\n    marker.addListener('gmp-click', () => handleMarkerDragend(marker));\n  }\n  console.log('Init Marker');\n\n  return marker;\n}\n\nexport function markerUpdate(marker, position) {\n  marker.position = position;\n}\n\nexport function updateMarkerWindow(marker, content, showLoader = false) {\n  const loaderHTML = '<div class=\"loader\"></div>';\n  const finalContent = showLoader ? loaderHTML : content;\n\n  globals.infoWindow.setContent(finalContent);\n  globals.infoWindow.open(globals.map, marker);\n}\n\nexport function initSavedMarkers() {\n  userMarkers = getDataFromLS('user-markers');\n  userMarkers.forEach(markerData => {\n    initMarker(markerData, true, 'User saved marker');\n  });\n  const userLocation = getDataFromLS('user-location-marker');\n  globals.marker.position = userLocation;\n  console.log('Init SavedMarkers');\n}\n","import axios from 'axios';\nimport { config } from './config';\nimport { globals } from './globals';\n\nexport async function getRoutes(origin, destination) {\n  const url = 'https://routes.googleapis.com/directions/v2:computeRoutes';\n\n  const requestData = {\n    origin: {\n      location: {\n        latLng: {\n          latitude: origin.lat,\n          longitude: origin.lng,\n        },\n      },\n    },\n    destination: {\n      location: {\n        latLng: {\n          latitude: destination.lat,\n          longitude: destination.lng,\n        },\n      },\n    },\n    travelMode: 'WALK',\n    //routingPreference: 'TRAFFIC_UNAWARE',\n    computeAlternativeRoutes: false,\n    routeModifiers: {\n      avoidTolls: false,\n      avoidHighways: false,\n      avoidFerries: false,\n    },\n    languageCode: 'en-US',\n    units: 'IMPERIAL',\n  };\n\n  const headers = {\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Goog-Api-Key': config.GM_API_KEY,\n      'X-Goog-FieldMask':\n        'routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline',\n    },\n  };\n\n  try {\n    const response = await axios.post(url, requestData, headers);\n    return response.data;\n  } catch (error) {\n    console.error(\n      'Помилка отримання маршруту:',\n      error.response?.data || error.message\n    );\n    throw error;\n  }\n}\n\nexport async function drawRoute(encodedPolyline) {\n  const { geometry } = await google.maps.importLibrary('geometry');\n\n  const path = google.maps.geometry.encoding.decodePath(encodedPolyline);\n\n  const routePath = new google.maps.Polyline({\n    path: path,\n    geodesic: true,\n    strokeColor: '#FF0000',\n    strokeOpacity: 1.0,\n    strokeWeight: 4,\n  });\n\n  routePath.setMap(globals.map);\n}\n\nexport function removeRoute(routePath) {\n  routePath.setMap(null);\n}\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M560-160v-80h104L537-367l57-57%20126%20126v-102h80v240H560Zm-344%200-56-56%20504-504H560v-80h240v240h-80v-104L216-160Zm151-377L160-744l56-56%20207%20207-56%2056Z'/%3e%3c/svg%3e\"","import { refs } from './refs';\nimport { dataToJSON } from './utils';\n\nexport function renderFindLocation(data) {\n  refs.locationList.innerHTML = '';\n\n  const markup = data\n    .map(({ formatted_address, geometry }) => {\n      return `<li class='location-item' data-location='${dataToJSON(\n        geometry.location\n      )}' data-name='${formatted_address}'>\n\t\t<h3>${formatted_address}</h3>\n\t\t<p>Coordinates: ${geometry.location.lat}, ${geometry.location.lng}</p>\n\t\t</li>`;\n    })\n    .join('');\n\n  refs.locationList.insertAdjacentHTML('beforeend', markup);\n}\n","import { saveToLS } from './localStorage';\nimport {\n  getCurrentLocation,\n  getLocation,\n  getMyGeolocation,\n  getRandomPlace,\n} from './maps';\nimport { initMarker, markerUpdate, updateMarkerWindow } from './marker';\nimport { drawRoute, getRoutes } from './routes';\nimport { convertMetersToKmeters, convertS } from './utils';\nimport { globals } from './globals';\nimport randomIcon from '../img/random-marker.svg';\nimport { renderFindLocation } from './render';\n\nlet randomMarker;\nlet findLocationMarker;\n\nexport async function handleClickRandomBtn() {\n  const newPosition = getRandomPlace();\n  globals.map.setCenter(newPosition);\n\n  if (!randomMarker) {\n    randomMarker = await initMarker(\n      newPosition,\n      false,\n      'Random marker',\n      randomIcon\n    );\n  }\n\n  markerUpdate(randomMarker, newPosition);\n}\n\nexport async function handleClickFindMeBtn() {\n  await getMyGeolocation();\n}\n\nexport function handleLocationError(browserHasGeolocation, pos) {\n  obj.infoWindow.setPosition(pos);\n  obj.infoWindow.setContent(\n    browserHasGeolocation\n      ? 'Error: The Geolocation service failed.'\n      : \"Error: Your browser doesn't support geolocation.\"\n  );\n  obj.infoWindow.open(obj.map);\n}\n\nexport async function handleMarkerDragend(marker) {\n  const position = marker.position;\n  let info = `<p>Pin dropped at: ${position.lat}, ${position.lng}</p>`;\n  let encodedPolyline = null;\n\n  updateMarkerWindow(marker, '', true);\n\n  try {\n    const originCoordinate = globals.marker.position;\n    const data = await getRoutes(originCoordinate, position);\n\n    if (!data.routes || data.routes.length === 0) {\n      info += '<b>No routes found</b>';\n    } else {\n      const route = data.routes[0];\n      const { kkms, kms, meters } = convertMetersToKmeters(\n        route.distanceMeters\n      );\n      const { days, hours, minutes } = convertS(\n        Number.parseInt(route.duration)\n      );\n      encodedPolyline = route.polyline?.encodedPolyline || null;\n\n      info += `<p>Approximate route length: ${kkms || ''} ${\n        kms || ''\n      } km., ${meters} meters</p>\n  \t\t\t<p>Approximate route time:\n        ${days ? days + ' d.,' : ''}\n        ${hours ? hours + ' h.,' : ''}\n        ${minutes} min. </p>`;\n\n      if (encodedPolyline) {\n        info += `<button id=\"btn-draw-route\" type=\"button\">Draw route</button>`;\n      } else {\n        info += '<b>No route polyline found</b>';\n      }\n    }\n\n    updateMarkerWindow(marker, info);\n\n    google.maps.event.addListenerOnce(globals.infoWindow, 'domready', () => {\n      const btn = document.getElementById('btn-draw-route');\n      if (btn) {\n        btn.addEventListener('click', () => {\n          if (encodedPolyline) {\n            drawRoute(encodedPolyline);\n          } else {\n            console.error('Cannot draw route: No encoded polyline available.');\n          }\n        });\n      }\n    });\n  } catch (error) {\n    console.error('Error fetching route:', error);\n    info += '<b>Error retrieving route data</b>';\n    await getMyGeolocation();\n    updateMarkerWindow(marker, info);\n  }\n}\n\nexport async function handleClickOnMap(event, userMarkers) {\n  const position = event.latLng;\n  initMarker(position, true, 'New User Marker');\n  userMarkers.push(position);\n  saveToLS('user-markers', userMarkers);\n}\n\nexport function handleMyMarkerDragend() {\n  const position = globals.marker.position;\n  updateMarkerWindow(globals.marker, '', true);\n  saveToLS('user-location-marker', position);\n  updateMarkerWindow(globals.marker, 'New your current location. Saved!');\n}\n\nexport async function handleSubmitLocationForm(event) {\n  event.preventDefault();\n  const form = event.target;\n  const query = form.elements['location-text'].value.trim();\n  console.log(query);\n  const data = await getLocation(query);\n  console.log(data);\n  renderFindLocation(data);\n}\n\nexport async function handleClickOnFindLocation(event) {\n  const item = event.target.closest('.location-item');\n  if (item) {\n    const itemLocation = JSON.parse(item.dataset?.location || '{}');\n    const itemName = item.dataset?.name;\n    if (itemLocation && itemName) {\n      console.log('Clicked on:', itemLocation, itemName);\n      globals.map.setCenter(itemLocation);\n      if (!findLocationMarker) {\n        findLocationMarker = await initMarker(itemLocation, true, itemName);\n      }\n\n      markerUpdate(findLocationMarker, itemLocation);\n    } else {\n      console.warn('Missing data attributes on the clicked element.');\n    }\n  } else {\n    console.warn('Invalid click: No valid list item found.');\n  }\n}\n","import { refs } from './refs';\nimport { getRandomArbitrary } from './utils';\nimport { handleClickOnMap, handleLocationError } from './handlers';\nimport { userMarkers } from './marker';\nimport { config } from './config';\n\nimport { globals } from './globals';\nimport axios from 'axios';\n\nexport async function initMap(position = { lat: -25.344, lng: 131.031 }) {\n  const { Map } = await google.maps.importLibrary('maps');\n\n  const map = await new Map(refs.mapArea, {\n    zoom: 16,\n    center: position,\n    mapId: 'DEMO_MAP_ID',\n  });\n\n  map.addListener('click', event => {\n    handleClickOnMap(event, userMarkers);\n  });\n\n  console.log('Init Map');\n\n  return map;\n}\n\nexport async function getMyGeolocation() {\n  try {\n    const currentPosition = await getCurrentLocation();\n\n    globals.infoWindow.setPosition(currentPosition);\n    globals.infoWindow.setContent('Your current location');\n    globals.infoWindow.open(globals.map);\n    globals.marker.position = currentPosition;\n    globals.map.setCenter(currentPosition);\n    globals.map.setZoom(15);\n  } catch (error) {\n    handleLocationError(true, globals.infoWindow, globals.map.getCenter());\n  }\n}\n\nexport async function getCurrentLocation() {\n  return new Promise((res, rej) => {\n    if (!navigator.geolocation) {\n      reject(new Error('Geolocation is not supported by this browser.'));\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(\n      position =>\n        res({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude,\n        }),\n      e => rej(e),\n      {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0,\n      }\n    );\n  });\n}\n\nexport async function getLocation(query) {\n  const url = `https://maps.googleapis.com/maps/api/geocode/json?address=${query}&key=${config.GM_API_KEY}`;\n\n  const { data } = await axios(url);\n  return data.results;\n}\n\nexport function getRandomPlace() {\n  return {\n    lat: Number(getRandomArbitrary(-64.05, 85.05)),\n    lng: Number(getRandomArbitrary(-180, 180)),\n  };\n}\n","import { refs } from './refs';\n\n// const refs.resizer = document.querySelector('.resizer');\nconst leftColumn = refs.resizer.previousElementSibling;\n\nlet isResizing = false;\n\nrefs.resizer.addEventListener('mousedown', event => {\n  isResizing = true;\n  document.addEventListener('mousemove', onMouseMove);\n  document.addEventListener('mouseup', onMouseUp);\n});\n\nfunction onMouseMove(event) {\n  if (!isResizing) return;\n\n  let newLeftWidth = event.clientX - leftColumn.getBoundingClientRect().left;\n  leftColumn.style.width = `${newLeftWidth}px`;\n}\n\nfunction onMouseUp() {\n  isResizing = false;\n  document.removeEventListener('mousemove', onMouseMove);\n  document.removeEventListener('mouseup', onMouseUp);\n}\n","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M360-80v-529q-91-24-145.5-100.5T160-880h80q0%2083%2053.5%20141.5T430-680h100q30%200%2056%2011t47%2032l181%20181-56%2056-158-158v478h-80v-240h-80v240h-80Zm120-640q-33%200-56.5-23.5T400-800q0-33%2023.5-56.5T480-880q33%200%2056.5%2023.5T560-800q0%2033-23.5%2056.5T480-720Z'/%3e%3c/svg%3e\"","export async function initInfoWindow() {\n  const { InfoWindow } = await google.maps.importLibrary('maps');\n  console.log('Init InfoWindow');\n  return new InfoWindow();\n}\n","import { getCurrentLocation, initMap } from './js/maps';\nimport './js/resizer.js';\nimport { refs } from './js/refs';\nimport {\n  handleClickFindMeBtn,\n  handleClickRandomBtn,\n  handleMyMarkerDragend,\n  handleSubmitLocationForm,\n  handleClickOnFindLocation,\n} from './js/handlers.js';\nimport { globals } from './js/globals';\nimport peopleIcon from './img/emoji-people.svg';\nimport { initInfoWindow } from './js/infoWindow';\nimport { initMarker, initSavedMarkers, userMarkers } from './js/marker';\n\nasync function initApp() {\n  console.log('Init App');\n\n  const currentPosition = await getCurrentLocation();\n\n  globals.map = await initMap(currentPosition);\n  globals.marker = await initMarker(\n    currentPosition,\n    true,\n    'Your location',\n    peopleIcon,\n    false\n  );\n  globals.infoWindow = await initInfoWindow();\n\n  initSavedMarkers();\n\n  globals.marker.addListener('dragend', handleMyMarkerDragend);\n  globals.marker.addListener('gmp-click', handleMyMarkerDragend);\n\n  refs.randomBtn.addEventListener('click', handleClickRandomBtn);\n  refs.findMeBtn.addEventListener('click', handleClickFindMeBtn);\n\n  refs.addLocationForm.addEventListener('submit', handleSubmitLocationForm);\n  refs.locationList.addEventListener('click', handleClickOnFindLocation);\n}\n\nwindow.onload = initApp;\n"],"names":["config","g","h","a","k","p","c","l","q","m","b","d","r","e","u","f","n","t","refs","convertS","s","days","hours","minutes","seconds","convertMetersToKmeters","kkms","kms","meters","getRandomArbitrary","min","max","dataToJSON","data","jsonToData","jsonData","error","saveToLS","key","getDataFromLS","globals","userMarkers","initMarker","position","draggable","title","markerImage","defaultMarker","AdvancedMarkerElement","PinElement","glyphSvgPinElement","glyphImg","marker","handleMarkerDragend","markerUpdate","updateMarkerWindow","content","showLoader","finalContent","initSavedMarkers","markerData","userLocation","getRoutes","origin","destination","url","requestData","headers","axios","drawRoute","encodedPolyline","path","randomIcon","renderFindLocation","markup","formatted_address","geometry","randomMarker","findLocationMarker","handleClickRandomBtn","newPosition","getRandomPlace","handleClickFindMeBtn","getMyGeolocation","handleLocationError","browserHasGeolocation","pos","info","originCoordinate","route","btn","handleClickOnMap","event","handleMyMarkerDragend","handleSubmitLocationForm","query","getLocation","handleClickOnFindLocation","item","itemLocation","itemName","initMap","Map","map","currentPosition","getCurrentLocation","res","rej","leftColumn","isResizing","onMouseMove","onMouseUp","newLeftWidth","peopleIcon","initInfoWindow","InfoWindow","initApp"],"mappings":"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"}