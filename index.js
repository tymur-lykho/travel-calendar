import{a as S}from"./assets/vendor-C19taMLP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const M={GM_API_KEY:"AIzaSyCRqbfD4tRFZ-38qw05HcOWlWRQqoPfjYY"};(e=>{var t,o,n,r="The Google Maps JavaScript API",a="google",s="importLibrary",d="__ib__",c=document,l=window;l=l[a]||(l[a]={});var m=l.maps||(l.maps={}),g=new Set,p=new URLSearchParams,O=()=>t||(t=new Promise(async(w,y)=>{await(o=c.createElement("script")),p.set("libraries",[...g]+"");for(n in e)p.set(n.replace(/[A-Z]/g,R=>"_"+R[0].toLowerCase()),e[n]);p.set("callback",a+".maps."+d),o.src=`https://maps.${a}apis.com/maps/api/js?`+p,m[d]=w,o.onerror=()=>t=y(Error(r+" could not load.")),o.nonce=c.querySelector("script[nonce]")?.nonce||"",c.head.append(o)}));m[s]?console.warn(r+" only loads once. Ignoring:",e):m[s]=(w,...y)=>g.add(w)&&O().then(()=>m[s](w,...y))})({key:M.GM_API_KEY,v:"weekly"});const u={mapArea:document.getElementById("map"),resizer:document.querySelector(".resizer"),randomBtn:document.getElementById("btn-random-place"),findMeBtn:document.getElementById("btn-my-coordinate"),addMarkerBtn:document.getElementById("btn-add-marker"),addLocationbtn:document.getElementById("btn-add-location"),addLocationForm:document.getElementById("add-location-form"),locationList:document.getElementById("location-list")};function _(e){const r=Math.floor(e/86400),a=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),d=e%60;return{days:r,hours:a,minutes:s,seconds:d}}function F(e){const n=Math.floor(e/1e6),r=Math.floor(e%1e6/1e3),a=e%1e3;return{kkms:n,kms:r,meters:a}}function E(e,t){return Math.random()*(t-e)+e}function W(e){return JSON.stringify(e)}function j(e){try{return JSON.parse(e)}catch(t){console.log("Parse error :",t)}}function B(e,t){localStorage.setItem(e,W(t))}function I(e){return j(localStorage.getItem(e))}const i={map:null,marker:null,infoWindow:null};let L=[];async function h(e,t,o,n=void 0,r=!0){const{AdvancedMarkerElement:a,PinElement:s}=await google.maps.importLibrary("marker");let d;if(n){const l=document.createElement("img");l.src=n,d=new s({glyph:l})}const c=new a({map:i.map,position:e,gmpDraggable:t,gmpClickable:!0,content:d?.element,title:o});return c.addListener("dragstart",()=>{i.infoWindow.close()}),r&&(c.addListener("dragend",()=>P(c)),c.addListener("gmp-click",()=>P(c))),console.log("Init Marker"),c}function T(e,t){e.position=t}function f(e,t,o=!1){const r=o?'<div class="loader"></div>':t;i.infoWindow.setContent(r),i.infoWindow.open(i.map,e)}function D(){L=I("user-markers"),L.forEach(t=>{h(t,!0,"User saved marker")});const e=I("user-location-marker");i.marker.position=e,console.log("Init SavedMarkers")}async function G(e,t){const o="https://routes.googleapis.com/directions/v2:computeRoutes",n={origin:{location:{latLng:{latitude:e.lat,longitude:e.lng}}},destination:{location:{latLng:{latitude:t.lat,longitude:t.lng}}},travelMode:"WALK",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"},r={headers:{"Content-Type":"application/json","X-Goog-Api-Key":M.GM_API_KEY,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline"}};try{return(await S.post(o,n,r)).data}catch(a){throw console.error("Помилка отримання маршруту:",a.response?.data||a.message),a}}async function H(e){await google.maps.importLibrary("geometry");const t=google.maps.geometry.encoding.decodePath(e);new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:4}).setMap(i.map)}const K="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M560-160v-80h104L537-367l57-57%20126%20126v-102h80v240H560Zm-344%200-56-56%20504-504H560v-80h240v240h-80v-104L216-160Zm151-377L160-744l56-56%20207%20207-56%2056Z'/%3e%3c/svg%3e";function Y(e){u.locationList.innerHTML="";const t=e.map(({formatted_address:o,geometry:n})=>`<li class='location-item' data-location='${W(n.location)}' data-name='${o}'>
		<h3>${o}</h3>
		<p>Coordinates: ${n.location.lat}, ${n.location.lng}</p>
		</li>`).join("");u.locationList.insertAdjacentHTML("beforeend",t)}let v,k;async function Z(){const e=te();i.map.setCenter(e),v||(v=await h(e,!1,"Random marker",K)),T(v,e)}async function z(){await N()}function U(e,t){obj.infoWindow.setPosition(t),obj.infoWindow.setContent("Error: The Geolocation service failed."),obj.infoWindow.open(obj.map)}async function P(e){const t=e.position;let o=`<p>Pin dropped at: ${t.lat}, ${t.lng}</p>`,n=null;f(e,"",!0);try{const r=i.marker.position,a=await G(r,t);if(!a.routes||a.routes.length===0)o+="<b>No routes found</b>";else{const s=a.routes[0],{kkms:d,kms:c,meters:l}=F(s.distanceMeters),{days:m,hours:g,minutes:p}=_(Number.parseInt(s.duration));n=s.polyline?.encodedPolyline||null,o+=`<p>Approximate route length: ${d||""} ${c||""} km., ${l} meters</p>
  			<p>Approximate route time:
        ${m?m+" d.,":""}
        ${g?g+" h.,":""}
        ${p} min. </p>`,n?o+='<button id="btn-draw-route" type="button">Draw route</button>':o+="<b>No route polyline found</b>"}f(e,o),google.maps.event.addListenerOnce(i.infoWindow,"domready",()=>{const s=document.getElementById("btn-draw-route");s&&s.addEventListener("click",()=>{n?H(n):console.error("Cannot draw route: No encoded polyline available.")})})}catch(r){console.error("Error fetching route:",r),o+="<b>Error retrieving route data</b>",await N(),f(e,o)}}async function J(e,t){const o=e.latLng;h(o,!0,"New User Marker"),t.push(o),B("user-markers",t)}function C(){const e=i.marker.position;f(i.marker,"",!0),B("user-location-marker",e),f(i.marker,"New your current location. Saved!")}async function X(e){e.preventDefault();const o=e.target.elements["location-text"].value.trim();console.log(o);const n=await ee(o);console.log(n),Y(n)}async function Q(e){const t=e.target.closest(".location-item");if(t){const o=JSON.parse(t.dataset?.location||"{}"),n=t.dataset?.name;o&&n?(console.log("Clicked on:",o,n),i.map.setCenter(o),k||(k=await h(o,!0,n)),T(k,o)):console.warn("Missing data attributes on the clicked element.")}else console.warn("Invalid click: No valid list item found.")}async function V(e={lat:-25.344,lng:131.031}){const{Map:t}=await google.maps.importLibrary("maps"),o=await new t(u.mapArea,{zoom:16,center:e,mapId:"DEMO_MAP_ID"});return o.addListener("click",n=>{J(n,L)}),console.log("Init Map"),o}async function N(){try{const e=await $();i.infoWindow.setPosition(e),i.infoWindow.setContent("Your current location"),i.infoWindow.open(i.map),i.marker.position=e,i.map.setCenter(e),i.map.setZoom(15)}catch{U(!0,i.infoWindow,i.map.getCenter())}}async function $(){return new Promise((e,t)=>{if(!navigator.geolocation){reject(new Error("Geolocation is not supported by this browser."));return}navigator.geolocation.getCurrentPosition(o=>e({lat:o.coords.latitude,lng:o.coords.longitude}),o=>t(o),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}async function ee(e){const t=`https://maps.googleapis.com/maps/api/geocode/json?address=${e}&key=${M.GM_API_KEY}`,{data:o}=await S(t);return o.results}function te(){return{lat:Number(E(-64.05,85.05)),lng:Number(E(-180,180))}}const A=u.resizer.previousElementSibling;let b=!1;u.resizer.addEventListener("mousedown",e=>{b=!0,document.addEventListener("mousemove",q),document.addEventListener("mouseup",x)});function q(e){if(!b)return;let t=e.clientX-A.getBoundingClientRect().left;A.style.width=`${t}px`}function x(){b=!1,document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",x)}const oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M360-80v-529q-91-24-145.5-100.5T160-880h80q0%2083%2053.5%20141.5T430-680h100q30%200%2056%2011t47%2032l181%20181-56%2056-158-158v478h-80v-240h-80v240h-80Zm120-640q-33%200-56.5-23.5T400-800q0-33%2023.5-56.5T480-880q33%200%2056.5%2023.5T560-800q0%2033-23.5%2056.5T480-720Z'/%3e%3c/svg%3e";async function ne(){const{InfoWindow:e}=await google.maps.importLibrary("maps");return console.log("Init InfoWindow"),new e}async function re(){console.log("Init App");const e=await $();i.map=await V(e),i.marker=await h(e,!0,"Your location",oe,!1),i.infoWindow=await ne(),D(),i.marker.addListener("dragend",C),i.marker.addListener("gmp-click",C),u.randomBtn.addEventListener("click",Z),u.findMeBtn.addEventListener("click",z),u.addLocationForm.addEventListener("submit",X),u.locationList.addEventListener("click",Q)}window.onload=re;
//# sourceMappingURL=index.js.map
