import{a as $}from"./assets/vendor-C19taMLP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const P={GM_API_KEY:void 0};(e=>{var t,r,a,o="The Google Maps JavaScript API",n="google",i="importLibrary",u="__ib__",p=document,s=window;s=s[n]||(s[n]={});var g=s.maps||(s.maps={}),L=new Set,f=new URLSearchParams,k=()=>t||(t=new Promise(async(y,h)=>{await(r=p.createElement("script")),f.set("libraries",[...L]+"");for(a in e)f.set(a.replace(/[A-Z]/g,_=>"_"+_[0].toLowerCase()),e[a]);f.set("callback",n+".maps."+u),r.src=`https://maps.${n}apis.com/maps/api/js?`+f,g[u]=y,r.onerror=()=>t=h(Error(o+" could not load.")),r.nonce=p.querySelector("script[nonce]")?.nonce||"",p.head.append(r)}));g[i]?console.warn(o+" only loads once. Ignoring:",e):g[i]=(y,...h)=>L.add(y)&&k().then(()=>g[i](y,...h))})({key:P.GM_API_KEY,v:"weekly"});const{Map:G}=await google.maps.importLibrary("maps"),{AdvancedMarkerElement:R}=await google.maps.importLibrary("marker");await google.maps.importLibrary("geometry");let l,m;async function S(e={lat:-25.344,lng:131.031}){l=await new G(document.getElementById("map"),{zoom:5,center:e,mapId:"DEMO_MAP_ID"});const t=x(l,e,!0,"Draggable marker");return m=new google.maps.InfoWindow,{map:l,marker:t,infoWindow:m}}async function N(){try{const e=await A();m.setPosition(e),m.setContent("Location found."),m.open(l),l.setCenter(e)}catch{K(!0,m,l.getCenter())}}async function A(){return new Promise((e,t)=>{if(!navigator.geolocation){reject(new Error("Geolocation is not supported by this browser."));return}navigator.geolocation.getCurrentPosition(r=>e({lat:r.coords.latitude,lng:r.coords.longitude}),r=>t(r),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}async function O(e,t){const r=google.maps.geometry.encoding.decodePath(t);new google.maps.Polyline({path:r,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:4}).setMap(e)}function B(e,t){e.position=t}function D(){return{lat:Number(M(-85.05,85.05)),lng:Number(M(-180,180))}}function x(e,t,r,a){return new R({map:e,position:t,gmpDraggable:r,title:a})}function M(e,t){return Math.random()*(t-e)+e}function K(e,t,r){t.setPosition(r),t.setContent("Error: The Geolocation service failed."),t.open(l)}const w=document.querySelector(".resizer"),E=w.previousElementSibling;w.nextElementSibling;let b=!1;w.addEventListener("mousedown",e=>{b=!0,document.addEventListener("mousemove",C),document.addEventListener("mouseup",I)});function C(e){if(!b)return;let t=e.clientX-E.getBoundingClientRect().left;E.style.width=`${t}px`}function I(){b=!1,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",I)}async function q(e,t){const r="https://routes.googleapis.com/directions/v2:computeRoutes",a={origin:{location:{latLng:{latitude:e.lat,longitude:e.lng}}},destination:{location:{latLng:{latitude:t.lat,longitude:t.lng}}},travelMode:"WALK",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"};try{return(await $.post(r,a,{headers:{"Content-Type":"application/json","X-Goog-Api-Key":P.GM_API_KEY,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline"}})).data}catch(o){throw console.error("Помилка отримання маршруту:",o.response?.data||o.message),o}}function F(e){const o=Math.floor(e/86400),n=Math.floor(e%86400/3600),i=Math.floor(e%3600/60),u=e%60;return{days:o,hours:n,minutes:i,seconds:u}}const W=document.getElementById("btn-random-place"),z=document.getElementById("btn-my-coordinate"),{map:v,marker:c,infoWindow:d}=await S();W.addEventListener("click",async()=>{const e=await D();v.setCenter(e),B(c,e)});z.addEventListener("click",async()=>{await N(),v.setZoom(15)});c.addListener("dragend",async()=>{const e=c.position;let t=`<p>Pin dropped at: ${e.lat}, ${e.lng}</p>`,r=null;try{const a=await A(),o=await q(a,e);if(!o.routes||o.routes.length===0)t+="<b>No routes found</b>";else{const n=o.routes[0],i=n.distanceMeters>1e3?n.distanceMeters/1e3:n.distanceMeters,{days:u,hours:p,minutes:s}=F(Number.parseInt(n.duration));r=n.polyline?.encodedPolyline||null,t+=`<p>Approximate route length: ${i} ${i>1e3?"km":"m"}</p>
      <p>Approximate route time: ${u} d., ${p} h., ${s} min. </p>`,r?t+='<button id="btn-draw-route" type="button">Draw route</button>':t+="<b>No route polyline found</b>"}d.close(),d.setContent(t),d.open(c.map,c),google.maps.event.addListenerOnce(d,"domready",()=>{const n=document.getElementById("btn-draw-route");n&&n.addEventListener("click",()=>{r?O(v,r):console.error("Cannot draw route: No encoded polyline available.")})})}catch(a){console.error("Error fetching route:",a),t+="<b>Error retrieving route data</b>",d.setContent(t),d.open(c.map,c)}});
//# sourceMappingURL=index.js.map
