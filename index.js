import{a as C,i as D}from"./assets/vendor-B_OA0gJ3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const E={GM_API_KEY:"AIzaSyCRqbfD4tRFZ-38qw05HcOWlWRQqoPfjYY"};(e=>{var t,o,n,r="The Google Maps JavaScript API",i="google",s="importLibrary",d="__ib__",l=document,u=window;u=u[i]||(u[i]={});var m=u.maps||(u.maps={}),g=new Set,p=new URLSearchParams,F=()=>t||(t=new Promise(async(w,k)=>{await(o=l.createElement("script")),p.set("libraries",[...g]+"");for(n in e)p.set(n.replace(/[A-Z]/g,j=>"_"+j[0].toLowerCase()),e[n]);p.set("callback",i+".maps."+d),o.src=`https://maps.${i}apis.com/maps/api/js?`+p,m[d]=w,o.onerror=()=>t=k(Error(r+" could not load.")),o.nonce=l.querySelector("script[nonce]")?.nonce||"",l.head.append(o)}));m[s]?console.warn(r+" only loads once. Ignoring:",e):m[s]=(w,...k)=>g.add(w)&&F().then(()=>m[s](w,...k))})({key:E.GM_API_KEY,v:"weekly"});const c={mapArea:document.getElementById("map"),resizer:document.querySelector(".resizer"),randomBtn:document.getElementById("btn-random-place"),findMeBtn:document.getElementById("btn-my-coordinate"),addMarkerBtn:document.getElementById("btn-add-marker"),addLocationbtn:document.getElementById("btn-add-location"),addLocationForm:document.getElementById("add-location-form"),locationList:document.getElementById("location-list"),closeLocationListBtn:document.getElementById("btn-close-location-list"),createRouteForm:document.getElementById("create-route-form"),userRoutesList:document.getElementById("user-routes"),userRouteItemList:document.getElementById("user-route")};function _(e){const r=Math.floor(e/86400),i=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),d=e%60;return{days:r,hours:i,minutes:s,seconds:d}}function H(e){const n=Math.floor(e/1e6),r=Math.floor(e%1e6/1e3),i=e%1e3;return{kkms:n,kms:r,meters:i}}function P(e,t){return Math.random()*(t-e)+e}function S(e){return JSON.stringify(e)}function G(e){try{return JSON.parse(e)}catch(t){console.log("Parse error :",t)}}function I(e,t){localStorage.setItem(e,S(t))}function L(e){return G(localStorage.getItem(e))}const a={map:null,marker:null,infoWindow:null};let v=[];async function y(e,t,o,n=void 0,r=!0){const{AdvancedMarkerElement:i,PinElement:s}=await google.maps.importLibrary("marker");let d;if(n){const u=document.createElement("img");u.src=n,d=new s({glyph:u})}const l=new i({map:a.map,position:e,gmpDraggable:t,gmpClickable:!0,content:d?.element,title:o});return l.addListener("dragstart",()=>{a.infoWindow.close()}),r&&(l.addListener("dragend",()=>T(l)),l.addListener("gmp-click",()=>T(l))),console.log("Init Marker"),l}function A(e,t){e.position=t}function f(e,t,o=!1){const r=o?'<div class="loader"></div>':t;a.infoWindow.setContent(r),a.infoWindow.open(a.map,e)}function Z(){v=L("user-markers"),v&&v.forEach(t=>{y(t,!0,"User saved marker")});const e=L("user-location-marker");e&&(a.marker.position=e),console.log("Init SavedMarkers")}function Y(e){c.locationList.innerHTML="";const t=e.map(({formatted_address:o,geometry:n})=>`<li class='location-item' data-location='${S(n.location)}' data-name='${o}'>
		<h3>${o}</h3>
		<p>Coordinates: ${n.location.lat}, ${n.location.lng}</p>
		</li>`).join("");c.locationList.insertAdjacentHTML("beforeend",t)}function x(e){c.userRoutesList.innerHTML="";const t=e.map(o=>`
			<h5>${o.title}</h5>
			<ol
      class="user-route draggable-container"
      id="user-route"
      style="border: 1px solid red"
    >
		</ol>`).join("");c.userRoutesList.insertAdjacentHTML("beforeend",t)}let h=[];async function z(e,t){const o="https://routes.googleapis.com/directions/v2:computeRoutes",n={origin:{location:{latLng:{latitude:e.lat,longitude:e.lng}}},destination:{location:{latLng:{latitude:t.lat,longitude:t.lng}}},travelMode:"WALK",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"},r={headers:{"Content-Type":"application/json","X-Goog-Api-Key":E.GM_API_KEY,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline"}};try{return(await C.post(o,n,r)).data}catch(i){throw console.error("Помилка отримання маршруту:",i.response?.data||i.message),i}}async function U(e){await google.maps.importLibrary("geometry");const t=google.maps.geometry.encoding.decodePath(e);new google.maps.Polyline({path:t,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:4}).setMap(a.map)}function K(e,t){const o={place:{title:"Start Point",coordinate:e},description:"You start your route on this point",pointNumber:0},n={title:t,route:[]};return n.route.push(o),h.push(n),I("user-routes",h),n}function J(){h=L("user-routes")||[],x(h),console.log("Init User Routes")}const X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M560-160v-80h104L537-367l57-57%20126%20126v-102h80v240H560Zm-344%200-56-56%20504-504H560v-80h240v240h-80v-104L216-160Zm151-377L160-744l56-56%20207%20207-56%2056Z'/%3e%3c/svg%3e",Q="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M480-80q-83%200-156-31.5T197-197q-54-54-85.5-127T80-480q0-83%2031.5-156T197-763q54-54%20127-85.5T480-880q146%200%20255.5%2091.5T872-559h-82q-19-73-68.5-130.5T600-776v16q0%2033-23.5%2056.5T520-680h-80v80q0%2017-11.5%2028.5T400-560h-80v80h80v120h-40L168-552q-3%2018-5.5%2036t-2.5%2036q0%20131%2092%20225t228%2095v80Zm364-20L716-228q-21%2012-45%2020t-51%208q-75%200-127.5-52.5T440-380q0-75%2052.5-127.5T620-560q75%200%20127.5%2052.5T800-380q0%2027-8%2051t-20%2045l128%20128-56%2056ZM620-280q42%200%2071-29t29-71q0-42-29-71t-71-29q-42%200-71%2029t-29%2071q0%2042%2029%2071t71%2029Z'/%3e%3c/svg%3e";let b,M;async function V(){const e=le();a.map.setCenter(e),b||(b=await y(e,!1,"Random marker",X)),A(b,e)}async function ee(){await W()}function te(e,t){obj.infoWindow.setPosition(t),obj.infoWindow.setContent("Error: The Geolocation service failed."),obj.infoWindow.open(obj.map)}async function T(e){const t=e.position;let o=`<p>Pin dropped at: ${t.lat}, ${t.lng}</p>`,n=null;f(e,"",!0);try{const r=a.marker.position,i=await z(r,t);if(!i.routes||i.routes.length===0)o+="<b>No routes found</b>";else{const s=i.routes[0],{kkms:d,kms:l,meters:u}=H(s.distanceMeters),{days:m,hours:g,minutes:p}=_(Number.parseInt(s.duration));n=s.polyline?.encodedPolyline||null,o+=`<p>Approximate route length: ${d||""} ${l||""} km., ${u} meters</p>
  			<p>Approximate route time:
        ${m?m+" d.,":""}
        ${g?g+" h.,":""}
        ${p} min. </p>`,n?o+='<button id="btn-draw-route" type="button">Draw route</button>':o+="<b>No route polyline found</b>"}f(e,o),google.maps.event.addListenerOnce(a.infoWindow,"domready",()=>{const s=document.getElementById("btn-draw-route"),d=document.getElementById("btn-add-to-route");s&createRouteBtn&d&&s.addEventListener("click",()=>{n?U(n):console.error("Cannot draw route: No encoded polyline available.")})})}catch(r){console.error("Error fetching route:",r),o+="<b>Error retrieving route data</b>",await W(),f(e,o)}}async function oe(e,t){const o=e.latLng;y(o,!0,"New User Marker"),t.push(o),I("user-markers",t)}function B(){const e=a.marker.position;f(a.marker,"",!0),I("user-location-marker",e),f(a.marker,"New your current location. Saved!")}async function ne(e){e.preventDefault();const t=e.target,o=t.elements["location-text"].value.trim();try{if(o){const n=await ce(o);n&&(Y(n),c.closeLocationListBtn.removeAttribute("hidden"))}else throw new Error("Query Error")}catch(n){D.error({title:"Submit form error",position:"topRight",message:n})}t.elements["location-text"].value=""}async function re(e){const t=e.target.closest(".location-item");if(t){const o=JSON.parse(t.dataset?.location||"{}"),n=t.dataset?.name;o&&n?(a.map.setCenter(o),M||(M=await y(o,!1,n,Q,!1)),A(M,o)):console.warn("Missing data attributes on the clicked element.")}else console.warn("Invalid click: No valid list item found.")}function ie(){c.closeLocationListBtn.setAttribute("hidden",!0),c.locationList.innerHTML=""}function ae(e){e.preventDefault();const t=L("user-location-marker"),n=e.target.elements["route-name"].value.trim();K(t,n),x(h)}async function se(e={lat:-25.344,lng:131.031}){const{Map:t}=await google.maps.importLibrary("maps"),o=await new t(c.mapArea,{zoom:16,center:e,mapId:"DEMO_MAP_ID"});return o.addListener("click",n=>{oe(n,v)}),console.log("Init Map"),o}async function W(){try{const e=await N();a.infoWindow.setPosition(e),a.infoWindow.setContent("Your current location"),a.infoWindow.open(a.map),a.marker.position=e,a.map.setCenter(e),a.map.setZoom(15)}catch{te(!0,a.infoWindow,a.map.getCenter())}}async function N(){return new Promise((e,t)=>{if(!navigator.geolocation){reject(new Error("Geolocation is not supported by this browser."));return}navigator.geolocation.getCurrentPosition(o=>e({lat:o.coords.latitude,lng:o.coords.longitude}),o=>t(o),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})})}async function ce(e){const t=`https://maps.googleapis.com/maps/api/geocode/json?address=${e}&key=${E.GM_API_KEY}`;try{const{data:o}=await C(t);if(o.results&&o.results.length!==0)return o.results;throw new Error("Place not found!")}catch(o){iziToast.error({title:"Get location error!",position:"topRight",message:o})}}function le(){return{lat:Number(P(-64.05,85.05)),lng:Number(P(-180,180))}}const R=c.resizer.previousElementSibling;let q=!1;c.resizer.addEventListener("mousedown",e=>{q=!0,document.addEventListener("mousemove",$),document.addEventListener("mouseup",O)});function $(e){if(!q)return;let t=e.clientX-R.getBoundingClientRect().left;R.style.width=`${t}px`}function O(){q=!1,document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",O)}const de=document.querySelectorAll(".draggable"),ue=document.querySelectorAll(".draggable-container");de.forEach(e=>{e.addEventListener("dragstart",()=>{e.classList.add("dragging")}),e.addEventListener("dragend",()=>{e.classList.remove("dragging")})});ue.forEach(e=>{e.addEventListener("dragover",t=>{t.preventDefault();const o=document.querySelector(".dragging"),n=me(e,t.clientY);n?e.insertBefore(o,n):e.appendChild(o)})});function me(e,t){const o=[...e.querySelectorAll(".draggable:not(.dragging)")];for(const n of o){const r=n.getBoundingClientRect();if(t<r.bottom)return n}return null}const pe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M360-80v-529q-91-24-145.5-100.5T160-880h80q0%2083%2053.5%20141.5T430-680h100q30%200%2056%2011t47%2032l181%20181-56%2056-158-158v478h-80v-240h-80v240h-80Zm120-640q-33%200-56.5-23.5T400-800q0-33%2023.5-56.5T480-880q33%200%2056.5%2023.5T560-800q0%2033-23.5%2056.5T480-720Z'/%3e%3c/svg%3e";async function ge(){const{InfoWindow:e}=await google.maps.importLibrary("maps");return console.log("Init InfoWindow"),new e}async function fe(){console.log("Init App");const e=await N();a.map=await se(e),a.marker=await y(e,!0,"Your location",pe,!1),a.infoWindow=await ge(),Z(),J(),a.marker.addListener("dragend",B),a.marker.addListener("gmp-click",B),c.randomBtn.addEventListener("click",V),c.findMeBtn.addEventListener("click",ee),c.addLocationForm.addEventListener("submit",ne),c.locationList.addEventListener("click",re),c.closeLocationListBtn.addEventListener("click",ie),c.createRouteForm.addEventListener("submit",ae)}window.onload=fe;
//# sourceMappingURL=index.js.map
